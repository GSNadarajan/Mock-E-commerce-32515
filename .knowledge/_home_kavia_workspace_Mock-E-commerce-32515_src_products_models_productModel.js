{"is_source_file": true, "format": "JavaScript", "description": "ProductModel class that handles JSON file-based storage for product data operations including CRUD functionalities using Node.js.", "external_files": ["fs", "fs-extra", "path", "uuid"], "external_methods": ["fs.promises.readFile", "fs.promises.access", "fs.promises.writeFile", "fs.promises.rename", "fsExtra.ensureDir"], "published": ["ProductModel", "initialize", "getAllProducts", "getProductById", "createProduct", "updateProduct", "deleteProduct", "searchProducts", "findProductsByCategory", "countProducts"], "classes": [{"name": "ProductModel", "description": "Class responsible for managing product data and interactions with the underlying JSON file storage."}], "methods": [{"name": "initialize()", "description": "Initializes the products.json file, ensuring the data directory exists and the file has the proper structure.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "_readData()", "description": "Reads and parses the product data from the JSON file, ensuring the data structure is valid.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "_writeData(data)", "description": "Writes product data to the JSON file with improved error handling and a simple file locking mechanism.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "getAllProducts()", "description": "Returns all products as an array.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "getProductById(id)", "description": "Fetches a product by its ID, returning null if not found.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "createProduct(productData)", "description": "Creates a new product based on the provided product data.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "updateProduct(id, productData)", "description": "Updates an existing product's data based on the provided ID and updated data.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "deleteProduct(id)", "description": "Deletes a product by its ID, returning true if deleted and false if not found.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "searchProducts(query)", "description": "Searches for products by their name or description matching the provided query.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "findProductsByCategory(category)", "description": "Finds products belonging to a specific category.", "scope": "ProductModel", "scopeKind": "class"}, {"name": "countProducts()", "description": "Counts and returns the total number of products.", "scope": "ProductModel", "scopeKind": "class"}], "calls": ["fs.promises.access", "fs.promises.readFile", "fs.promises.writeFile", "fs.promises.rename", "fsExtra.ensureDir", "setTimeout"], "search-terms": ["ProductModel", "JSON storage", "product operations", "Node.js"], "state": 2, "file_id": 69, "knowledge_revision": 186, "git_revision": "", "ctags": [{"_type": "tag", "name": "ProductModel", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^class ProductModel {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_readData", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async _readData() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "_writeData", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async _writeData(data) {$/", "language": "JavaScript", "kind": "method", "signature": "(data)", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^      category: productData.category || 'uncategorized',$/", "language": "JavaScript", "kind": "property", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class"}, {"_type": "tag", "name": "countProducts", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async countProducts() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "createProduct", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async createProduct(productData) {$/", "language": "JavaScript", "kind": "method", "signature": "(productData)", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^      createdAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class"}, {"_type": "tag", "name": "dataDir", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^const dataDir = path.join(__dirname, '..\\/..\\/..\\/data');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "dbPath", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^const dbPath = path.join(dataDir, 'products.json');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "deleteProduct", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async deleteProduct(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^      description: productData.description || '',$/", "language": "JavaScript", "kind": "property", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class"}, {"_type": "tag", "name": "findProductsByCategory", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async findProductsByCategory(category) {$/", "language": "JavaScript", "kind": "method", "signature": "(category)", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^const fs = require('fs').promises;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fsExtra", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^const fsExtra = require('fs-extra');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getAllProducts", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async getAllProducts() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "getProductById", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async getProductById(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^      id: uuidv4(),$/", "language": "JavaScript", "kind": "property", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class"}, {"_type": "tag", "name": "imageUrl", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^      imageUrl: productData.imageUrl || null,$/", "language": "JavaScript", "kind": "property", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class"}, {"_type": "tag", "name": "initialize", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async initialize() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "isWriting", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^let isWriting = false;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^      name: productData.name,$/", "language": "JavaScript", "kind": "property", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class"}, {"_type": "tag", "name": "newProduct", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^    const newProduct = {$/", "language": "JavaScript", "kind": "class", "scope": "ProductModel.createProduct", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "price", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^      price: productData.price,$/", "language": "JavaScript", "kind": "property", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class"}, {"_type": "tag", "name": "searchProducts", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async searchProducts(query) {$/", "language": "JavaScript", "kind": "method", "signature": "(query)", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "stock", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^      stock: productData.stock !== undefined ? productData.stock : 0,$/", "language": "JavaScript", "kind": "property", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class"}, {"_type": "tag", "name": "updateProduct", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^  static async updateProduct(id, productData) {$/", "language": "JavaScript", "kind": "method", "signature": "(id, productData)", "scope": "ProductModel", "scopeKind": "class"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "pattern": "/^      updatedAt: new Date().toISOString()$/", "language": "JavaScript", "kind": "property", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class"}], "filename": "/home/kavia/workspace/Mock-E-commerce-32515/src/products/models/productModel.js", "hash": "3e7b6eae70c19184cfe806220241a7a8", "format-version": 4, "code-base-name": "default", "fields": [{"name": "category: productData.category || 'uncategorized',", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class", "description": "unavailable"}, {"name": "createdAt: new Date().toISOString(),", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class", "description": "unavailable"}, {"name": "description: productData.description || '',", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class", "description": "unavailable"}, {"name": "id: uuidv4(),", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class", "description": "unavailable"}, {"name": "imageUrl: productData.imageUrl || null,", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class", "description": "unavailable"}, {"name": "let isWriting = false;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "name: productData.name,", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class", "description": "unavailable"}, {"name": "price: productData.price,", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class", "description": "unavailable"}, {"name": "stock: productData.stock !== undefined ? productData.stock : 0,", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class", "description": "unavailable"}, {"name": "updatedAt: new Date().toISOString()", "scope": "ProductModel.createProduct.newProduct", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"186": ""}]}