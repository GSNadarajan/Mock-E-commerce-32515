{"is_source_file": true, "format": "JavaScript", "description": "OrderModel class for handling order data operations with JSON file-based storage using Node.js fs module.", "external_files": ["fs", "fs-extra", "path", "uuid"], "external_methods": [], "published": ["OrderModel"], "classes": [{"name": "OrderModel", "description": "Handles order data operations, including reading from and writing to a JSON file."}], "methods": [{"name": "initialize()", "description": "Initializes the orders.json file if it doesn't exist, ensuring the file has the correct structure.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "_readData()", "description": "Reads and parses orders data from the JSON file.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "_writeData(data)", "description": "Writes orders data to the JSON file with error handling and file locking.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "getAllOrders()", "description": "Retrieves all orders from the JSON file.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "getOrderById(orderId)", "description": "Gets an order by its ID.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "getOrdersByUserId(userId)", "description": "Retrieves all orders for a specific user.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "getOrdersByStatus(status)", "description": "Retrieves all orders with a specified status.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "createOrder(orderData)", "description": "Creates a new order with the given order data.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "updateOrder(orderId, updateData)", "description": "Updates an existing order with the specified updates.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "deleteOrder(orderId)", "description": "Deletes an order by its ID.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "searchOrders(criteria = {})", "description": "Searches for orders matching specified criteria.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "countOrdersByStatus()", "description": "Counts the number of orders for each status.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "getUserOrderHistory(userId)", "description": "Retrieves a user's order history.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "getRecentOrders(limit = 10)", "description": "Retrieves the most recent orders.", "scope": "OrderModel", "scopeKind": "class"}, {"name": "_calculateTotalAmount(items)", "scope": "OrderModel", "scopeKind": "class", "description": "unavailable"}, {"name": "addOrderItem(orderId, item)", "scope": "OrderModel", "scopeKind": "class", "description": "unavailable"}, {"name": "removeOrderItem(orderId, productId)", "scope": "OrderModel", "scopeKind": "class", "description": "unavailable"}, {"name": "updateOrderItem(orderId, productId, updates)", "scope": "OrderModel", "scopeKind": "class", "description": "unavailable"}, {"name": "updateOrderStatus(orderId, status, note)", "scope": "OrderModel", "scopeKind": "class", "description": "unavailable"}], "calls": ["fs.access", "fs.readFile", "fs.writeFile", "fs.rename", "fsExtra.ensureDir", "uuid.v4"], "search-terms": ["OrderModel", "order data operations", "JSON file storage"], "state": 2, "file_id": 73, "knowledge_revision": 195, "git_revision": "d9551d5e48a84d794f66019ff7110e296b9f9bea", "ctags": [{"_type": "tag", "name": "DEFAULT_DATA", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^const DEFAULT_DATA = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "OrderModel", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^class OrderModel {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "VALID_STATUSES", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^const VALID_STATUSES = ['pending', 'processing', 'shipped', 'delivered', 'cancelled'];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "_calculateTotalAmount", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static _calculateTotalAmount(items) {$/", "language": "JavaScript", "kind": "method", "signature": "(items)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "_readData", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async _readData() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "_writeData", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async _writeData(data) {$/", "language": "JavaScript", "kind": "method", "signature": "(data)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "addOrderItem", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async addOrderItem(orderId, item) {$/", "language": "JavaScript", "kind": "method", "signature": "(orderId, item)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "billingAddress", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      billingAddress: orderData.billingAddress || orderData.shippingAddress,$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "countOrdersByStatus", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async countOrdersByStatus() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "createOrder", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async createOrder(orderData) {$/", "language": "JavaScript", "kind": "method", "signature": "(orderData)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      createdAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "dataDir", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^const dataDir = path.join(__dirname, '..\\/..\\/..\\/data');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "dbPath", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^const dbPath = path.join(dataDir, 'orders.json');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "deleteOrder", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async deleteOrder(orderId) {$/", "language": "JavaScript", "kind": "method", "signature": "(orderId)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^const fs = require('fs').promises;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fsExtra", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^const fsExtra = require('fs-extra');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getAllOrders", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async getAllOrders() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "getOrderById", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async getOrderById(orderId) {$/", "language": "JavaScript", "kind": "method", "signature": "(orderId)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "getOrdersByStatus", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async getOrdersByStatus(status) {$/", "language": "JavaScript", "kind": "method", "signature": "(status)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "getOrdersByUserId", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async getOrdersByUserId(userId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "getRecentOrders", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async getRecentOrders(limit = 10) {$/", "language": "JavaScript", "kind": "method", "signature": "(limit = 10)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "getUserOrderHistory", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async getUserOrderHistory(userId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      id: uuidv4(),$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "initialize", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async initialize() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "isWriting", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^let isWriting = false;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      items: orderData.items,$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "newOrder", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^    const newOrder = {$/", "language": "JavaScript", "kind": "class", "scope": "OrderModel.createOrder", "scopeKind": "class"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      notes: orderData.notes || '',$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "orders", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  orders: []$/", "language": "JavaScript", "kind": "property", "scope": "DEFAULT_DATA", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "paymentMethod", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      paymentMethod: orderData.paymentMethod || null,$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "paymentStatus", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      paymentStatus: orderData.paymentStatus || 'pending',$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "removeOrderItem", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async removeOrderItem(orderId, productId) {$/", "language": "JavaScript", "kind": "method", "signature": "(orderId, productId)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "schemaVersion", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  schemaVersion: '1.0',$/", "language": "JavaScript", "kind": "property", "scope": "DEFAULT_DATA", "scopeKind": "class"}, {"_type": "tag", "name": "searchOrders", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async searchOrders(criteria = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(criteria = {})", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "shippingAddress", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      shippingAddress: orderData.shippingAddress,$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      status: orderData.status || 'pending',$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "statusHistory", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      statusHistory: [$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "totalAmount", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      totalAmount: orderData.totalAmount || this._calculateTotalAmount(orderData.items),$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "updateOrder", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async updateOrder(orderId, updateData) {$/", "language": "JavaScript", "kind": "method", "signature": "(orderId, updateData)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "updateOrderItem", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async updateOrderItem(orderId, productId, updates) {$/", "language": "JavaScript", "kind": "method", "signature": "(orderId, productId, updates)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "updateOrderStatus", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^  static async updateOrderStatus(orderId, status, note) {$/", "language": "JavaScript", "kind": "method", "signature": "(orderId, status, note)", "scope": "OrderModel", "scopeKind": "class"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      updatedAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "pattern": "/^      userId: orderData.userId,$/", "language": "JavaScript", "kind": "property", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class"}], "filename": "/home/kavia/workspace/Mock-E-commerce-32515/src/orders/models/orderModel.js", "hash": "c26a433ca65cb19cee1b03ff442f55e7", "format-version": 4, "code-base-name": "default", "fields": [{"name": "billingAddress: orderData.billingAddress || orderData.shippingAddress,", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "createdAt: new Date().toISOString(),", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "id: uuidv4(),", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "let isWriting = false;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "items: orderData.items,", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "notes: orderData.notes || '',", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "orders: []", "scope": "DEFAULT_DATA", "scopeKind": "class", "description": "unavailable"}, {"name": "paymentMethod: orderData.paymentMethod || null,", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "paymentStatus: orderData.paymentStatus || 'pending',", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "schemaVersion: '1.0',", "scope": "DEFAULT_DATA", "scopeKind": "class", "description": "unavailable"}, {"name": "shippingAddress: orderData.shippingAddress,", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "status: orderData.status || 'pending',", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "statusHistory: [", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "totalAmount: orderData.totalAmount || this._calculateTotalAmount(orderData.items),", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "updatedAt: new Date().toISOString(),", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: orderData.userId,", "scope": "OrderModel.createOrder.newOrder", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"195": "d9551d5e48a84d794f66019ff7110e296b9f9bea"}]}