{"is_source_file": true, "format": "JavaScript", "description": "The CartModel class manages operations related to shopping carts, including creation, modification, deletion, and data management within a JSON file.", "external_files": ["fs", "fs-extra", "path", "uuid"], "external_methods": [], "published": ["CartModel"], "classes": [{"name": "CartModel", "description": "Handles all operations related to shopping carts"}], "methods": [{"name": "initialize()", "description": "Initializes the carts JSON file, ensuring the directory exists and validating the file structure.", "scope": "CartModel", "scopeKind": "class"}, {"name": "_readData()", "description": "Reads carts data from the JSON file and ensures the correct structure.", "scope": "CartModel", "scopeKind": "class"}, {"name": "_writeData(data)", "description": "Writes carts data to the JSON file with error handling and file locking.", "scope": "CartModel", "scopeKind": "class"}, {"name": "getAllCarts()", "description": "Retrieves all carts.", "scope": "CartModel", "scopeKind": "class"}, {"name": "getCartByUserId(userId)", "description": "Retrieves the cart associated with a specific user ID.", "scope": "CartModel", "scopeKind": "class"}, {"name": "createOrUpdateCart(userId, items)", "description": "Creates a new cart or updates an existing cart for a given user ID.", "scope": "CartModel", "scopeKind": "class"}, {"name": "addItemToCart(userId, item)", "description": "Adds an item to the user's cart, updating existing items as needed.", "scope": "CartModel", "scopeKind": "class"}, {"name": "removeItemFromCart(userId, productId)", "description": "Removes an item from the user's cart.", "scope": "CartModel", "scopeKind": "class"}, {"name": "clearCart(userId)", "description": "Clears all items from the user's cart.", "scope": "CartModel", "scopeKind": "class"}, {"name": "deleteCart(userId)", "description": "Deletes the user's cart.", "scope": "CartModel", "scopeKind": "class"}, {"name": "updateItemQuantity(userId, productId, quantity)", "description": "Updates the quantity of an item in the user's cart.", "scope": "CartModel", "scopeKind": "class"}, {"name": "calculateCartTotal(userId)", "description": "Calculates the total price and item count for the user's cart.", "scope": "CartModel", "scopeKind": "class"}], "calls": ["fs.readFile", "fs.writeFile", "fs.rename", "fs.access", "fsExtra.ensureDir"], "search-terms": ["cart operations", "carts.json management", "shopping cart model", "user cart actions"], "state": 2, "file_id": 40, "knowledge_revision": 108, "git_revision": "3360dc5c8b4d9e22089674fa24fb9fb1a2018523", "revision_history": [{"89": ""}, {"107": "3360dc5c8b4d9e22089674fa24fb9fb1a2018523"}, {"108": "3360dc5c8b4d9e22089674fa24fb9fb1a2018523"}], "ctags": [{"_type": "tag", "name": "CartModel", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^class CartModel {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_readData", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async _readData() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "_writeData", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async _writeData(data) {$/", "language": "JavaScript", "kind": "method", "signature": "(data)", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "addItemToCart", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async addItemToCart(userId, item) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, item)", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "calculateCartTotal", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async calculateCartTotal(userId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId)", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "cartsFilePath", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^const cartsFilePath = path.join(dataDir, 'carts.json');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "clearCart", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async clearCart(userId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId)", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "createOrUpdateCart", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async createOrUpdateCart(userId, items) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, items)", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "dataDir", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^const dataDir = path.join(__dirname, '..\\/data');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "deleteCart", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async deleteCart(userId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId)", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^const fs = require('fs').promises;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fsExtra", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^const fsExtra = require('fs-extra');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getAllCarts", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async getAllCarts() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "getCartByUserId", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async getCartByUserId(userId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId)", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^        id: uuidv4(),$/", "language": "JavaScript", "kind": "property", "scope": "CartModel.createOrUpdateCart.newCart", "scopeKind": "class"}, {"_type": "tag", "name": "initialize", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async initialize() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "isWriting", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^let isWriting = false;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "newCart", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^      const newCart = {$/", "language": "JavaScript", "kind": "class", "scope": "CartModel.createOrUpdateCart", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "removeItemFromCart", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async removeItemFromCart(userId, productId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, productId)", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "updateItemQuantity", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^  static async updateItemQuantity(userId, productId, quantity) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, productId, quantity)", "scope": "CartModel", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "pattern": "/^      userId,$/", "language": "JavaScript", "kind": "field", "scope": "CartModel.createOrUpdateCart.cartData", "scopeKind": "class"}], "filename": "/home/kavia/workspace/Mock-E-commerce-32515/order-management/src/models/cartModel.js", "hash": "d58284af772b932a037c09b01596a16a", "format-version": 4, "code-base-name": "default", "fields": [{"name": "id: uuidv4(),", "scope": "CartModel.createOrUpdateCart.newCart", "scopeKind": "class", "description": "unavailable"}, {"name": "let isWriting = false;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "userId,", "scope": "CartModel.createOrUpdateCart.cartData", "scopeKind": "class", "description": "unavailable"}]}